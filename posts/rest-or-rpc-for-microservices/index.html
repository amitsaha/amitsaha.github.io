<!DOCTYPE html>
<html><head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="echo $RANDOM. Exploring Software and writing about it.">
    
    <link rel="shortcut icon" href="https://echorand.me/favicon.ico">
    
    <link rel="stylesheet" href="/css/style.min.css">

    <title>Why RPC in Microservices instead of HTTP?</title>
</head>
<body><header id="banner">
    <h2><a href="https://echorand.me">Exploring Software</a></h2>
    <nav>
        <ul>
            <li>
                <a href="/about" title="">About</a>
            </li><li>
                <a href="/articles" title="">Articles</a>
            </li><li>
                <a href="/books" title="">Books</a>
            </li><li>
                <a href="/posts" title="">Posts</a>
            </li><li>
                <a href="/talks" title="">Talks</a>
            </li><li>
                <a href="/categories/" title="">Categories</a>
            </li>
        </ul>
    </nav>
</header>
<main id="content">
<article>
    <header id="post-header">
        <h1>Why RPC in Microservices instead of HTTP?</h1><time>February 11, 2018</time></header><p>The Freelancer.com <a href="https://developers.freelancer.com/">REST API</a>
is powered by a number of backend services. The API itself is powered by a Python HTTP server which
communicates with the other services (Python, Golang and PHP) via RPC calls implemented using <a href="https://thrift.apache.org/">Apache Thrift</a>.
It is only during the past 2.5 years that I have been working with Apache Thrift or cross-language RPCs in general.
The question often comes up especially when thinking about the future - why not just use HTTP throughout across
all services? HTTP 1.1 is simple and easy to understand. Implementing a HTTP API endpoint doesn&rsquo;t also mean having
to learn about Apache Thrift so that the data we want to respond with can come from another service written
in a different language. HTTP is also not coupled to any specific language, which means you can still use
different programming language across services. So, <strong>Why not use HTTP throughout?</strong></p>
<p>Without going into technicalities, the one reason I think RPCs are a better fit than HTTP is very well put in this
<a href="https://blog.bugsnag.com/grpc-and-microservices-architecture/">blog post</a> on why they chose RPC:</p>
<blockquote>
<p>Unfortunately, it felt like we were trying to shoehorn simple methods calls into a data-driven RESTful interface.
The magical combination of verbs, headers, URL identifiers, resource URLs, and payloads that satisfied a RESTful
interface and made a clean, simple, functional interface seemed an impossible dream. RESTful has lots of rules and
interpretations, which in most cases result in a RESTish interface, which takes extra time and effort to maintain its purity.</p>
</blockquote>
<p>That to me is the number 1 reason of going with RPC. Instead of spending time and effort to have a semi-REST API, just use
RPC as the method of communication. Whether you go with <a href="https://thrift.apache.org">Apache Thrift</a> or <a href="https://grpc.io/">gRPC</a>
is a different question. If you are working across services written in the same programming language, you may
find the language&rsquo;s own RPC implementation worth looking at as well. If you are working with <code>golang</code>,
<a href="https://blog.twitch.tv/twirp-a-sweet-new-rpc-framework-for-go-5f2febbf35f">twirp</a> looks interesting.</p>
<p>If you are working on prototyping or teaching the idea of microservices, HTTP is a good idea, but RPC would
be a better choice if you are looking to implement something which is going to be put into production.</p>
</article>
<footer id="footer">
    Post managed in a <a href="https://github.com/amitsaha/echorand.me">git repo</a> | <a href="https://github.com/amitsaha/echorand.me/commit/1b90ad51465b24203cfc8dc4f0cbc29d52efda78">Last Commit on this post </a>
  | <a href="https://github.com/amitsaha/echorand.me/edit/master/content/posts/rest-or-rpc-for-microservices.md">Edit post</a>
    <p>
    Blog managed via <a href="https://gohugo.io/">Hugo</a> and using a modified version of the <a href="https://themes.gohugo.io/etch/">Etch</a> theme.
    </p>  
</footer>

        </main><footer id="footer">
    
</footer>
</body>
</html>
